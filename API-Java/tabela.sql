
BEGIN
   EXECUTE IMMEDIATE 'DROP TABLE T_CONSULTA';
EXCEPTION
   WHEN OTHERS THEN
      IF SQLCODE != -942 THEN
         RAISE;
      END IF;
END;
/

BEGIN
   EXECUTE IMMEDIATE 'DROP TABLE T_PACIENTE';
EXCEPTION
   WHEN OTHERS THEN
      IF SQLCODE != -942 THEN
         RAISE;
      END IF;
END;
/

BEGIN
   EXECUTE IMMEDIATE 'DROP TABLE T_MEDICO';
EXCEPTION
   WHEN OTHERS THEN
      IF SQLCODE != -942 THEN
         RAISE;
      END IF;
END;
/

-- Tabela T_PACIENTE
CREATE TABLE T_PACIENTE (
  ID_PACIENTE NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
  NM_PACIENTE VARCHAR2(255) NOT NULL,
  NR_IDADE NUMBER(3) NULL,
  DS_EMAIL VARCHAR2(255) NOT NULL,
  NR_TELEFONE VARCHAR2(20) NULL,
  CONSTRAINT T_PACIENTE_PK PRIMARY KEY (ID_PACIENTE)
);

-- Tabela T_MEDICO
CREATE TABLE T_MEDICO (
  ID_MEDICO NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
  NM_MEDICO VARCHAR2(255) NOT NULL,
  DS_ESPECIALIDADE VARCHAR2(255) NOT NULL,
  NR_CRM VARCHAR2(50) NOT NULL,
  CONSTRAINT T_MEDICO_PK PRIMARY KEY (ID_MEDICO)
);

-- Tabela T_CONSULTA
CREATE TABLE T_CONSULTA (
  ID_CONSULTA NUMBER(10) GENERATED BY DEFAULT AS IDENTITY,
  DT_CONSULTA DATE NOT NULL,
  HR_CONSULTA VARCHAR2(10) NOT NULL,
  DS_MOTIVO VARCHAR2(500) NULL,
  ID_PACIENTE NUMBER(10) NOT NULL,
  ID_MEDICO NUMBER(10) NOT NULL,
  CONSTRAINT T_CONSULTA_PK PRIMARY KEY (ID_CONSULTA),
  CONSTRAINT T_CONSULTA_PACIENTE_FK
    FOREIGN KEY (ID_PACIENTE)
    REFERENCES T_PACIENTE (ID_PACIENTE),
  CONSTRAINT T_CONSULTA_MEDICO_FK
    FOREIGN KEY (ID_MEDICO)
    REFERENCES T_MEDICO (ID_MEDICO)
);

COMMIT;